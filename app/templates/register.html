<!DOCTYPE html>
<html lang="en">
<head>
    <title>Register</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
<section class="relative overflow-hidden min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center py-12">
        <!-- Background elements -->
        <div class="absolute inset-0 overflow-hidden">
            <div class="absolute -top-1/2 -right-1/2 bg-blue-400/20 dark:bg-blue-600/20 blur-3xl w-96 h-96 rounded-full"></div>
            <div class="absolute -bottom-1/2 -left-1/2 bg-purple-400/20 dark:bg-purple-600/20 blur-3xl w-96 h-96 rounded-full"></div>
        </div>

        <div class="relative z-10 mx-auto px-4 w-full max-w-lg">
            <!-- Single Page Form Container -->
            <div class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-xl p-8 border border-gray-200/50 dark:border-gray-700/50"
                 x-data="{
                     submitting: false,
                     showSuccess: false,
                     showPassword: false,
                     showconfirmpassword: false,
                     formData: {
                         firstname: '',
                         lastname: '',
                         username: '',
                         email: '',
                         phone: '',
                         password: '',
                         confirmpassword: '',
                         terms: false
                     },
                     errors: {},

                     validateField(fieldName, value) {
                         this.errors[fieldName] = '';

                         if (fieldName === 'firstname') {
                             if (!value.trim()) return 'First name is required';
                         }

                         if (fieldName === 'lastname') {
                             if (!value.trim()) return 'Last name is required';
                         }
                         if (fieldName === 'username') {
                             if (!value.trim()) return 'username is required';
                         }
                         if (fieldName === 'email') {
                             if (!value.trim()) {
                                 return 'Email is required';
                             } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
                                 return 'Please enter a valid email address';
                             }
                         }

                         if (fieldName === 'password') {
                             if (!value) {
                                 return 'Password is required';
                             } else if (value.length < 8) {
                                 return 'Password must be at least 8 characters';
                             }
                         }

                         if (fieldName === 'confirmpassword') {
                             if (value !== this.formData.password) {
                                 return 'Passwords do not match';
                             }
                         }

                         if (fieldName === 'terms') {
                             if (!value) {
                                 return 'You must accept the terms and conditions';
                             }
                         }

                         return '';
                     },

                     validateForm() {
                         this.errors = {};
                         let isValid = true;

                         // Validate all fields
                         Object.keys(this.formData).forEach(field => {
                             if (field !== 'phone') {
                                 const error = this.validateField(field, this.formData[field]);
                                 if (error) {
                                     this.errors[field] = error;
                                     isValid = false;
                                 }
                             }
                         });

                         return isValid;
                     },

                     async submitForm() {
                         if (!this.validateForm()) {
                             // Scroll to first error
                             const firstError = document.querySelector('.error-input');
                             if (firstError) {
                                 firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                                 firstError.focus();
                             }
                             return;
                         }

                         this.submitting = true;

                         // Simulate API call
                         await new Promise(resolve => setTimeout(resolve, 1500));

                         // Show success message
                         this.showSuccess = true;
                         this.submitting = false;
                     },

                     resetForm() {
                         this.formData = {
                             firstname: '',
                             lastname: '',
                             email: '',
                             phone: '',
                             password: '',
                             confirmpassword: '',
                             terms: false
                         };
                         this.errors = {};
                         this.showSuccess = false;
                     }
                 }">

                <!-- Registration Form -->
                  {% if error %}
    <p class="text-red-500 text-center">{{ error }}</p>
    {% endif %}
                <form method="post">
                    {% csrf_token %}
                    <div class="space-y-6">
                        <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Create Your Account</h2>

                        <!-- Personal Information -->
                      <!-- Personal Information -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
        <label for="firstname" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">First Name</label>
        <input type="text" id="firstname" name="firstname" x-model="formData.firstname"
               @blur="errors.firstname = validateField('firstname', formData.firstname)"
               class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none transition-all duration-200" placeholder="First name">
    </div>

    <div>
        <label for="lastname" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Last Name</label>
        <input type="text" id="lastname" name="lastname" x-model="formData.lastname"
               @blur="errors.lastname = validateField('lastname', formData.lastname)"
               class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none transition-all duration-200" placeholder="Last name">
    </div>
</div>

<div>
    <label for="username" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Username</label>
    <input type="text" id="username" name="username" x-model="formData.username"
           @blur="errors.username = validateField('username', formData.username)"
           class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none transition-all duration-200" placeholder="Username">
</div>

<div>
    <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email</label>
    <input type="email" id="email" name="email" x-model="formData.email"
           @blur="errors.email = validateField('email', formData.email)"
           class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none transition-all duration-200" placeholder="youremail@gmail.com">
</div>

<div>
    <label for="phone" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Phone</label>
    <input type="tel" id="phone" name="phone" x-model="formData.phone"
           class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none transition-all duration-200" placeholder="+254712345678">
</div>

<div>
    <label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Password</label>
    <input :type="showPassword ? 'text' : 'password'" id="password" name="password"
           x-model="formData.password"
           @blur="errors.password = validateField('password', formData.password)"
           class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none transition-all duration-200" placeholder="Password">
</div>

<div>
    <label for="confirmpassword" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Confirm Password</label>
    <input :type="showconfirmpassword ? 'text' : 'password'" id="confirmpassword" name="confirmPassword"
           x-model="formData.confirmpassword"
           @blur="errors.confirmpassword = validateField('confirmpassword', formData.confirmpassword)"
           class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none transition-all duration-200" placeholder="Confirm Password">
</div>
<div>
    <label for="role" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Register As</label>
    <select id="role" name="role" class="w-full px-4 py-3 rounded-lg border">
        <option value="borrower">Borrower</option>
        <option value="lender">Lender</option>
        <option value="admin">Admin</option>
    </select>
</div>


                        <div class="mb-6">
                            <div class="flex items-start">
                                <div class="flex items-center h-5">
                                    <input id="terms" x-model="formData.terms" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                </div>
                                <label for="terms" class="ml-2 text-sm text-gray-700 dark:text-gray-300">
                                    I agree to the <a href="#" class="text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300">Terms and Conditions</a> and <a href="#" class="text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300">Privacy Policy</a>
                                </label>
                            </div>
                            <div x-show="errors.terms" x-text="errors.terms" class="mt-1 text-sm text-red-600 dark:text-red-400"></div>
                        </div>

                        <div class="flex justify-center">
                            <button type="submit" class="w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-70 ">Create Account</button>
                        </div>
                    </div>
                </form>
             <p class="text-center text-gray-500 py-4  ">Have an account? <a href="{% url 'login' %}" class="font-medium text-blue-600 hover:text-blue-500">Sign In</a></p>
                    </div>
                </div>
    </section>
</body>
</html>
